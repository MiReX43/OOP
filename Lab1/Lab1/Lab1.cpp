#include <iostream>
#include <cmath>
#include <iomanip>

using namespace std;

int main() {

    setlocale(LC_ALL, "");

    int task;

    // Меню для выбора задачи
    cout << "Выберите задачу для проверки преподавателем:" << endl;
    cout << "1. Задача 1" << endl;
    cout << "2. Задача 2" << endl;
    cout << "3. Задача 3" << endl;
    cout << "4. Задача 4" << endl;
    cout << "Введите номер задачи: ";
    cin >> task;

    switch (task) {

    case 1: {

        //Ex 1
        double a, b;
        cout << "Введите значение A: ";
        cin >> a;
        cout << "Введите значение B: ";
        cin >> b;

        double result = log((sin(a * a) + cos(b)) / (sqrt(1 + (exp(1.0) / (pow(a, 3) + 3.4 * b)))));
        cout << "«Результат вчисления натурального логорифма от А и B: " << result << endl;

        break;

    }
    case 2: {

        //Ex 2
             // Константа для точности
        const double EPSILON = 0.001;

        // Ввод значения x
        double x;
        cout << "Введите значение x (-1 < x < 1): ";
        cin >> x;

        // Проверка диапазона x
        if (x <= -1 || x >= 1) {
            cout << "Ошибка: значение x должно быть в пределах (-1, 1)" << endl;
            return 1;
        }

        // Переменные для суммирования ряда
        double term = 1.0;
        double sum = term;
        int N = 1;

        // Вычисление ряда
        while (abs(term) > EPSILON) {
            term *= -x * N;
            sum += term;
            N++;
        }

        // Вывод результата
        cout << fixed << setprecision(4);
        cout << "F(" << x << ") = " << sum << endl;

        break;

    }
    case 3: {

        //Ex 3
        int subtask;
        cout << "Выберите вариант задания 3:" << endl;
        cout << "1. Вариант 3.1" << endl;
        cout << "2. Вариант 3.2" << endl;
        cout << "3. Вариант 3.3" << endl;
        cout << "4. Вариант 3.4" << endl;
        cout << "5. Вариант 3.5" << endl;
        cout << "6. Вариант 3.6" << endl;
        cout << "7. Вариант 3.7" << endl;
        cout << "Введите номер подзадачи: ";
        cin >> subtask;

        switch (subtask) {
        case 1: {
            //Во всех задачах исправлен int main(), using namespace std;
            //Ex 3.1
            int n1;
            cout << "Введите натуральное число: ";
            cin >> n1;

            for (int i = 1; i <= n1 / 2; i++) { //ошибки в синтаксисе и в условии цикла
                if (n1 % i == 0) { //оператор сравнения 
                    cout << i << " ";
                }
            }
            cout << n1 << endl; //вывести число n как делитель самого себя
            break;

        }
        case 2: {

            //Ex 3.2

            int n2, y = 1;
            cout << "Введите натуральное число: ";
            cin >> n2;

            if (n2 % 2 != 0) { //Исправлено условие для проверки нечетности числа
                for (int i = 1; i <= n2; i++) { //исправлен цикл для нечетных n
                    y *= i;
                }
            }
            else {
                for (int i = 2; i <= n2; i += 2) { //Исправлен цикл для четных n
                    y *= i;
                }
            }

            cout << y << endl; //Перенесен вывод
            break;

        }
        case 3: {

            //Ex 3.3

            int n3;
            double P = 1.0;

            cout << "Введите число n: ";
            cin >> n3;

            for (int i = 2; i <= n3; i += 2) { // Исправлен цикл обработки четных значений i c шагом +2 и условеие окончанеия цикла
                P *= (i * 1.0) / (i + 1); // Обновление переменной P 
            }

            for (int i = 1; i <= n3; i += 2) { // Исправлен цикл обработки нечетных значений i c шагом +2
                P *= (i + 1) * 1.0 / i;
            }

            cout << P << endl;

            break;

        }
        case 4: {

            //Ex 3.4

            //Исправлена ошибка в объявлении переменных
            int n4;
            double c, res = 0.0;

            cout << "Введите n: ";
            cin >> n4;
            cout << "Введите x: ";
            cin >> c;

            //Исправлены циклы, добавлены правильные границы
            for (int k = 1; k <= n4; k++) {
                double r = 0.0; //Обнуление r перед каждым новым k
                for (int m = k; m <= n4; m++) {
                    r += (c + k) / (1.0 * m); //Правильное деление для получения вещественного результата
                }
                res += r;
            }

            cout << "Результат: " << res << endl;

            break;

        }
        case 5: {

            //Ex 3.5

            int i, j, n5;
            float sum1, sum2;

            cout << "n: ";
            cin >> n5;

            sum1 = 0;
            sum2 = 0;

            // Исправлена ошибка в цикле for:
            // 1. В цикле i должно быть от 1 до n (i <= n)
            // 2. В цикле j должно быть от 1 до i (j <= i)
            for (i = 1; i <= n5; i++) {
                for (j = 1; j <= i; j++) {
                    // В формуле 1 / (i + 2 * j) было неправильно
                    sum1 = sum1 + (1.0 / (i + 2 * j)); // Используем 1.0 для точных вычислений с плавающей точкой
                }
            }

            sum2 = sum1 + sum2;

            // Исправлен вывод, использован правильный синтаксис для форматированного вывода
            cout << sum2 << endl;
            break;

        }
        case 6: {

            //Ex 3.6

            float d, e, f; // Объявление переменных для трех чисел
            int n = 0; // Счётчик количества чисел, которые больше своих соседей

            cout << "a1 = ";
            cin >> e; // Исправлен корректный синтаксис вывода и ввода для первого числа
            cout << "a2 = ";
            cin >> f;

            // Ввод оставшихся 198 чисел и обработка
            for (int i = 3; i <= 200; i++) { // Исправлен цикл начинается с i = 3, потому что первые два числа уже введены
                cout << "a" << i << " = ";
                cin >> d;

                // Проверка, что текущее число больше предыдущего и следующего
                if (f > e && d < f) { // Исправлена проверка условия, что c больше b и a меньше c
                    n++;
                }

                e = f;
                f = d;
            }

            cout << "Количество чисел, которые больше своих соседей: " << n << endl;
            break;

        }
        case 7: {

            //Ex 3.7

            int i, j;
            float p1;

            p1 = 1;

            // Исправлено: цикл должен идти от 1 до 20 для i
            for (i = 1; i <= 20; i++) {
                // Вложенный цикл от 1 до 20 для j
                for (j = 1; j <= 20; j++) {
                    // Исправлено правильное использование формулы для произведения
                    p1 = p1* (1.0 / (i + pow(j, 2))); // Используем pow(j, 2) для возведения в квадрат
                }
            }

            cout << p1 << endl;

            break;
        }
            
        }
        break;
    }
    case 4: {

        //Ex 4
        double h;
        cout << "Введите значение y: ";
        cin >> h;

        if (h > -2 && h < 2) {
            cout << "Значение в диапазоне" << endl;
        }
        else {
            cout << "Значение вне диапазона" << endl;
        }
        break;

    }

    }
}

